{"version":3,"sources":["bind.js","trim.js","moj.Conditional.js","moj.Details.js","moj.ExternalLinksTracker.js","moj.FocusHandler.js","moj.PromptOnChange.js","moj.SelectionButtons.js","moj.TemplatedElement.js","application.js"],"names":["Function","prototype","bind","oThis","this","TypeError","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat","String","trim","rtrim","replace","window","moj","Modules","Events","$","Conditional","$el","options","init","defaults","settings","extend","cacheElements","addAriaAttributes","bindEvents","refresh","$conditional","$inputs","data","self","on","toggle","conditionalId","attr","not","each","i","currentAttribute","getInputValue","$input","filter","val","find","currentValue","testExpression","RegExp","match","show","removeAttr","removeProp","hide","prop","_Conditional","Details","addClass","text","prependTo","isOpera","Object","toString","opera","openText","$details","closedText","$summaryText","updateState","$summary","$content","$icon","id","index","role","aria-controls","aria-expanded","aria-hidden","aria-live","off","click.details","event","preventDefault","toggleContent","keydown.details","keyCode","click","hasClass","removeClass","toggleClass","_Details","ExternalLinksTracker","eventCategory","eventAction","document","location","pathname","ga","$links","sendGAEvent","href","target","hitCallback","openLink","test","open","_ExternalLinksTracker","FocusHandler","$firstAlert","eq","addTabIndex","focus","$target","setTimeout","tabIndex","undefined","PromptOnChange","message","sessionTimeout","promptOnChangeMessage","currentHash","hashFields","enable","disable","runCheck","serialize","fieldsHaveChanged","isSessionTimeoutRedirect","isEnabled","now","Math","floor","Date","getTime","_PromptOnChange","SelectionButtons","change","is","closest","blur","trigger","TemplatedElement","templates","originalText","$element","updateText","getCurrentValue","getText","value","hasOwnProperty","_TemplatedElement","jQuery","fx","remove"],"mappings":"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","file":"application.js","sourcesContent":["/**\n * Polyfill for browsers not supporting native bind()\n *\n * https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind\n */\n if (!Function.prototype.bind) {\n   Function.prototype.bind = function(oThis) {\n     if (typeof this !== 'function') {\n       // closest thing possible to the ECMAScript 5\n       // internal IsCallable function\n       throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n     }\n\n     var aArgs   = Array.prototype.slice.call(arguments, 1),\n         fToBind = this,\n         fNOP    = function() {},\n         fBound  = function() {\n           return fToBind.apply(this instanceof fNOP\n                  ? this\n                  : oThis,\n                  aArgs.concat(Array.prototype.slice.call(arguments)));\n         };\n\n     fNOP.prototype = this.prototype;\n     fBound.prototype = new fNOP();\n\n     return fBound;\n   };\n }\n","/**\n * Polyfill for browsers not supporting native trim()\n *\n * https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trim\n */\n if (!String.prototype.trim) {\n   (function() {\n     // Make sure we trim BOM and NBSP\n     var rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n     String.prototype.trim = function() {\n       return this.replace(rtrim, '');\n     };\n   })();\n }\n","/**\n * Conditional form elements reveal\n *\n * Reveal content based on value of related field\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <input type=\"radio\" name=\"trigger_name\" value=\"regex\">\n * <input type=\"radio\" name=\"trigger_name\" value=\"another value\">\n * <div id=\"target_id\" data-conditional=\"trigger_name\" data-conditional-value=\"^regex$\">...</div>\n */\n\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Conditional = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Conditional.prototype = {\n    defaults: {},\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n    },\n\n    refresh: function() {\n      this.cacheElements(this.$conditional);\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$conditional = $el;\n      this.$inputs = $('[name=\"' + $el.data('conditional') + '\"]');\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs\n        .on('change.Conditional', function() {\n          self.toggle();\n        });\n      moj.Events\n        .on('render.Conditional', function() {\n          self.toggle();\n        });\n    },\n\n    addAriaAttributes: function() {\n      var conditionalId = this.$conditional.attr('id');\n      this.$inputs.not('[aria-controls*=' + conditionalId + ']').each(function() {\n        $(this).attr('aria-controls', function(i, currentAttribute) {\n          return currentAttribute ? currentAttribute + ' ' + conditionalId : conditionalId;\n        });\n      });\n      this.$conditional.attr('aria-live', 'polite');\n    },\n\n    getInputValue: function($input) {\n      switch($input.attr('type')) {\n        case \"radio\":\n          return $('[name=\"' + $input.attr('name') + '\"]:checked').attr('value');\n\n        case \"checkbox\":\n          return $input.filter(':checked').val();\n\n        default:\n          return $input.val() || $input.find(':selected').attr('value');\n      }\n    },\n\n    toggle: function() {\n      var currentValue = this.getInputValue(this.$inputs),\n          testExpression = new RegExp(this.$conditional.data('conditionalValue'));\n\n      if (currentValue && currentValue.match(testExpression)) {\n        this.$conditional\n          .show()\n          .attr('aria-expanded', 'true')\n          .removeAttr('aria-hidden')\n          .removeProp('hidden');\n      }\n      else {\n        this.$conditional\n          .hide()\n          .attr('aria-expanded', 'false')\n          .attr('aria-hidden', 'true')\n          .prop('hidden', true);\n      }\n    }\n  };\n\n  moj.Modules._Conditional = Conditional;\n\n  moj.Modules.Conditional = {\n    init: function() {\n      return $('[data-conditional]').each(function() {\n        $(this).data('Conditional', new Conditional($(this), $(this).data()));\n      });\n    }\n  };\n\n}());\n","/**\n * Details Element\n *\n * Replicate <details> functionality that's entirely cross-browser\n * compatible and offers options to update text depending on state\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <div class=\"js-Details [open]\" data-summary-open=\"Alternative text\">\n *   <a class=\"details-trigger\" href=\"#details-content\"><span class=\"summary\">View details</span></a>\n *   <div class=\"details-content\" id=\"details-content\">\n *     Content here\n *   </div>\n * </div>\n *\n * If summaryOpen is set, the summary text is replaced when open. Copy in markup\n * should always be for the closed state.\n */\n(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Details = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Details.prototype = {\n\n    init: function($el, options) {\n\n      $(\"<i>\").addClass(\"arrow arrow-closed\").text(\"\\u25ba\").prependTo($('.details-trigger', $el));\n\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n\n      this.isOpera = Object.prototype.toString.call(window.opera) == \"[object Opera]\";\n\n      this.openText = this.$details.data(\"summary-open\");\n      this.closedText = this.$summaryText.text();\n\n      this.updateState();\n    },\n\n    cacheElements: function($el) {\n      this.$details = $el;\n      this.$summary = $(\".details-trigger\", $el);\n      this.$summaryText = $(\".summary\", this.$summary);\n      this.$content = $(\".details-content\", $el);\n      this.$icon = $(\"i.arrow\", this.$summary);\n    },\n\n    addAriaAttributes: function() {\n      var id = this.$content.attr(\"id\");\n\n      if (!id) {\n        id = \"js-details-\" + this.$details.index(\".js-Details\");\n        this.$content.attr(\"id\", id);\n      }\n\n      this.$summary.attr({\n        \"role\": \"button\",\n        \"aria-controls\": id,\n        \"aria-expanded\": \"false\"\n      });\n\n      this.$content.attr({\n        \"aria-hidden\": \"true\",\n        \"aria-live\": \"polite\"\n      });\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$summary.off(\"click.details keydown.details\").on({\n        \"click.details\": function(event) {\n          event.preventDefault();\n          self.toggleContent();\n        },\n        \"keydown.details\": function(event) {\n          if (event.keyCode == 32 || (event.keyCode == 13 && !self.isOpera)) {\n            event.preventDefault();\n            self.$summary.click();\n          }\n        }\n      });\n    },\n\n    updateState: function() {\n      if (this.$details.hasClass(\"open\")) {\n        this.$summary.attr(\"aria-expanded\", \"true\");\n        this.$content.show().removeAttr(\"aria-hidden\").removeProp('hidden');\n        this.$icon.removeClass(\"arrow-closed\").addClass(\"arrow-open\").text(\"\\u25bc\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.openText);\n        }\n      }\n      else {\n        this.$summary.attr(\"aria-expanded\", \"false\");\n        this.$content.hide().attr(\"aria-hidden\", \"true\").prop(\"hidden\", true);\n        this.$icon.removeClass(\"arrow-open\").addClass(\"arrow-closed\").text(\"\\u25ba\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.closedText);\n        }\n      }\n    },\n\n    toggleContent: function() {\n      this.$details.toggleClass(\"open\");\n      this.updateState();\n    }\n  };\n\n  moj.Modules._Details = Details;\n\n  moj.Modules.Details = {\n    init: function() {\n      return $(\".js-Details\").each(function() {\n        $(this).data(\"Details\", new Details($(this), $(this).data()));\n      });\n    }\n  };\n\n}());\n","(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var ExternalLinksTracker = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  ExternalLinksTracker.prototype = {\n    defaults: {\n      \"eventCategory\": \"External links\",\n      \"eventAction\": document.location.pathname\n    },\n\n    init: function($el, options) {\n      if (typeof ga === \"undefined\") return;\n\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$links = $el;\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$links.on('click', function(event) {\n        event.preventDefault();\n        self.sendGAEvent($(this));\n      });\n    },\n\n    sendGAEvent: function($el) {\n      var self = this,\n          href = $el.attr(\"href\"),\n          target = $el.attr(\"target\");\n\n      ga(\"send\",\n         \"event\",\n         self.settings.eventCategory,\n         href,\n         self.settings.eventAction,\n         {\"hitCallback\": self.openLink(href, target)}\n      );\n    },\n\n    openLink: function(href, target) {\n      if (target && !/^_(self|parent|top)$/i.test(target)) {\n        window.open(href, target);\n      }\n      else {\n        window.location.href = href;\n      }\n    }\n  };\n\n  moj.Modules._ExternalLinksTracker = ExternalLinksTracker;\n\n  moj.Modules.ExternalLinksTracker = {\n    init: function() {\n      $('a[rel=external]').each(function() {\n        $(this).data('ExternalLinksTracker', new ExternalLinksTracker($(this), $(this).data()));\n      });\n    }\n  };\n}());\n","/**\n * Handle several aspects of focusing on the relevant element\n */\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  moj.Modules.FocusHandler = {\n    init: function() {\n      var $firstAlert = $('.success-header, .error-summary').eq(0);\n\n      /**\n       * Set focus to the first alert or success on the page\n       */\n      this.addTabIndex($firstAlert, '0');\n      $firstAlert.focus();\n\n      /**\n       * Set focus to the main content when clicking the 'skip link'\n       */\n      this.addTabIndex($('#content'), '-1');\n      $('.skiplink').on('click', function() { $('#content').focus(); });\n\n      /**\n       * Set focus to the relevant field when clicking an error message in the summary\n       */\n      $('.error-summary [href^=#section_]').on('click', function() {\n        var $target = $($(this).attr('href')).find('input, textarea, select').eq(0);\n        setTimeout(function() { $target.focus(); }, 250);\n      });\n    },\n    addTabIndex: function($el, tabIndex) {\n      if ($el.attr('tabindex') === undefined) {\n        $el.attr('tabindex', tabIndex);\n      }\n    }\n  };\n}());\n","/**\n * Page exit prompt\n *\n * Prompts the user upon leaving the page if they have changed\n * any data in any form.\n *\n * To set an alternative message or a session timeout timestamp\n * (after which the prompt will be disabled), declare the following\n * variables somewhere in the markup:\n *\n * <script>\n *   var promptOnChangeMessage = \"Alternative message\";\n *   var sessionTimeout = 123456789;\n * </script>\n */\n\n(function(){\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var PromptOnChange = function() {\n    this.init();\n    return this;\n  };\n\n  PromptOnChange.prototype = {\n    init: function() {\n      this.message = \"You have entered some information\";\n      this.sessionTimeout = false;\n\n      if (typeof promptOnChangeMessage === 'string') {\n        this.message = promptOnChangeMessage;\n      }\n      if (typeof sessionTimeout === 'number') {\n        this.sessionTimeout = sessionTimeout;\n      }\n\n      this.currentHash = this.hashFields();\n      this.bindEvents();\n\n      this.enable();\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      $('form').on('submit', function() {\n        self.disable();\n      });\n\n      // The second event here is used for testing, as there is no\n      // other way of mocking a beforeunload event!\n      $(window).on('beforeunload mock.beforeunload', function() {\n        return self.runCheck();\n      });\n    },\n\n    hashFields: function() {\n      return $('form').serialize();\n    },\n\n    fieldsHaveChanged: function() {\n      return this.hashFields() !== this.currentHash;\n    },\n\n    runCheck: function() {\n      if (this.isSessionTimeoutRedirect()) {\n        this.disable();\n      }\n\n      if (this.isEnabled && this.fieldsHaveChanged()) {\n        return this.message;\n      }\n    },\n\n    enable: function() {\n      this.isEnabled = true;\n    },\n\n    disable: function() {\n      this.isEnabled = false;\n    },\n\n    isSessionTimeoutRedirect: function() {\n      if (this.sessionTimeout) {\n        var now = Math.floor(new Date().getTime() / 1000);\n\n        if (now >= this.sessionTimeout) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  };\n\n  moj.Modules._PromptOnChange = PromptOnChange;\n\n  moj.Modules.PromptOnChange = {\n    init: function() {\n      return new PromptOnChange();\n    }\n  };\n\n}());\n","/**\n * Selection Buttons\n *\n * Provides extra focused and selected classes to radio and checkbox\n * form inputs to bring them to default gov.uk styling\n */\n\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  moj.Modules.SelectionButtons = {\n    init: function() {\n\n      $('label input[type=radio], label input[type=checkbox]').on({\n        'change': function(){\n          if ($(this).is(':checked')) {\n            if ($(this).is(':radio')) {\n              $(this).closest('form').find('[name=\"' + $(this).attr('name') + '\"]').closest('label').removeClass('selected');\n            }\n            $(this).closest('label').addClass('selected');\n          }\n          else {\n            $(this).closest('label').removeClass('selected');\n          }\n        },\n        'focus': function() {\n          $(this).closest('label').addClass('focused');\n        },\n        'blur': function() {\n          $(this).closest('label').removeClass('focused');\n        }\n      }).trigger('change');\n\n    }\n  };\n\n}());\n","/**\n * Templated Element\n *\n * Update the text of an element based on the value of a related input field\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <span id=\"templated\">Original content</span>\n *\n * <script>\n * $(function(){\n *   options = {\n *     \"trigger\": \"field_name\",\n *     \"templates\": {\n *       \"value_one\": \"Template one\",\n *       \"value_two\": \"Template two\"\n *     }\n *   }\n *   new moj.Modules.TemplatedElement($('#templated'), options);\n * });\n * </script>\n */\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var TemplatedElement = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  TemplatedElement.prototype = {\n    defaults: {\n      trigger: ''\n    },\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n\n      this.trigger = this.settings.trigger;\n      this.templates = this.settings.templates;\n      this.originalText = $el.eq(0).text();\n\n      this.cacheElements($el);\n\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$element = $el;\n      this.$inputs = $(':radio' + this.trigger);\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs.on('change.TemplatedElement', function() {\n        self.updateText();\n      });\n      moj.Events.on('render.TemplatedElement', function() {\n        self.updateText();\n      });\n    },\n\n    getCurrentValue: function() {\n      return this.$inputs.filter(':checked').val();\n    },\n\n    updateText: function() {\n      this.$element.text(this.getText());\n    },\n\n    getText: function() {\n      var text = this.originalText,\n          value = this.getCurrentValue();\n\n      if (value && this.templates.hasOwnProperty(value)) {\n        text = this.templates[value];\n      }\n\n      return text;\n    }\n  };\n\n  moj.Modules._TemplatedElement = TemplatedElement;\n\n}());\n","$(function() {\n  jQuery.fx.off = true;\n  $('.nojs-only[name=split_form]').remove();\n\n  // Handle spacebar use on links with role=button\n  $(document).on('keypress', 'a[role=button]', function(event){\n    if (event.keyCode === 32) {\n      event.preventDefault();\n      event.target.click();\n    }\n  });\n});\n"],"sourceRoot":"/source/"}