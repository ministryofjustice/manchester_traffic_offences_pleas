{"version":3,"sources":["trim.js","bind.js","selection-buttons.js","moj.CalculateTotals.js","moj.Conditional.js","moj.Details.js","moj.ExternalLinksTracker.js","moj.PromptOnChange.js","moj.TemplatedElement.js","application.js"],"names":["String","prototype","trim","this","replace","Function","bind","oThis","TypeError","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat","root","$","jQuery","GOVUK","SelectionButtons","elmsOrSelector","opts","$elms","selectedClass","focusedClass","undefined","each","optionName","optionObj","selector","setInitialState","addEvents","addElementLevelEvents","addDocumentLevelEvents","idx","elm","$elm","is","markSelected","markFocused","state","parent","addClass","removeClass","radioName","attr","form","find","clickHandler","getClickHandler","focusHandler","getFocusHandler","level","on","document","e","target","focusEvent","type","destroy","off","window","moj","Modules","Events","CalculateTotals","$el","options","init","defaults","terms","precision","settings","extend","termSelector","data","cacheElements","bindEvents","$total","$terms","self","updateTotal","getNumericValue","$element","value","text","val","isNumeric","parseFloat","getTotal","total","formatNumber","trigger","number","parts","toFixed","toString","split","join","_CalculateTotals","Conditional","addAriaAttributes","$conditional","$inputs","toggle","getInputValue","$input","filter","currentValue","testExpression","RegExp","match","show","hide","_Conditional","Details","prependTo","isOpera","Object","opera","openText","$details","closedText","$summaryText","updateState","$summary","$content","$icon","id","index","role","aria-controls","aria-expanded","aria-hidden","click.details","event","preventDefault","toggleContent","keydown.details","keyCode","click","hasClass","toggleClass","_Details","ExternalLinksTracker","eventCategory","eventAction","location","pathname","ga","$links","sendGAEvent","href","hitCallback","openLink","test","open","_ExternalLinksTracker","PromptOnChange","message","enable","initMetaRefresh","hashedFields","hashFields","disable","runCheck","serialize","fieldsHaveChanged","isEnabled","isMetaRefresh","metaRefreshAt","now","Date","getTime","refreshTag","length","refreshTimeoutLength","parseInt","_PromptOnChange","TemplatedElement","template","defaultsFor","originalText","eq","updateText","getCurrentValue","$currentSelection","formatValue","toLowerCase","getText","populateTemplate","_TemplatedElement","ready","fx","remove"],"mappings":"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","file":"application.js","sourcesContent":["/**\n * Fallback for browsers not supporting native trim()\n */\nif(typeof String.prototype.trim !== 'function') {\n  String.prototype.trim = function() {\n    return this.replace(/^\\s+|\\s+$/g, ''); \n  };\n}\n","// Function.prototype.bind\n//\n// A polyfill for Function.prototype.bind. Which lets you bind a defined\n// value to the `this` keyword in a function call.\n//\n// Bind is natively supported in:\n//   IE9+\n//   Chrome 7+\n//   Firefox 4+\n//   Safari 5.1.4+\n//   iOS 6+\n//   Android Browser 4+\n//   Chrome for Android 0.16+\n//\n// Originally from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\nif (!Function.prototype.bind) {\n  Function.prototype.bind = function (oThis) {\n    if (typeof this !== \"function\") {\n      // closest thing possible to the ECMAScript 5\n      // internal IsCallable function\n      throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function () {},\n        fBound = function () {\n          return fToBind.apply(this instanceof fNOP && oThis\n                 ? this\n                 : oThis,\n                 aArgs.concat(Array.prototype.slice.call(arguments)));\n        };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n}\n","(function () {\n  \"use strict\";\n  var root = this,\n      $ = root.jQuery;\n\n  if (typeof GOVUK === 'undefined') { root.GOVUK = {}; }\n\n  var SelectionButtons = function (elmsOrSelector, opts) {\n    var $elms;\n\n    this.selectedClass = 'selected';\n    this.focusedClass = 'focused';\n    if (opts !== undefined) {\n      $.each(opts, function (optionName, optionObj) {\n        this[optionName] = optionObj;\n      }.bind(this));\n    }\n    if (typeof elmsOrSelector === 'string') {\n      $elms = $(elmsOrSelector);\n      this.selector = elmsOrSelector;\n      this.setInitialState($(this.selector));\n    } else {\n      this.$elms = elmsOrSelector;\n      this.setInitialState(this.$elms);\n    }\n    this.addEvents();\n  };\n  SelectionButtons.prototype.addEvents = function () {\n    if (typeof this.$elms !== 'undefined') {\n      this.addElementLevelEvents();\n    } else {\n      this.addDocumentLevelEvents();\n    }\n  };\n  SelectionButtons.prototype.setInitialState = function ($elms) {\n    $elms.each(function (idx, elm) {\n      var $elm = $(elm);\n\n      if ($elm.is(':checked')) {\n        this.markSelected($elm);\n      }\n    }.bind(this));\n  };\n  SelectionButtons.prototype.markFocused = function ($elm, state) {\n    if (state === 'focused') {\n      $elm.parent('label').addClass(this.focusedClass);\n    } else {\n      $elm.parent('label').removeClass(this.focusedClass);\n    }\n  };\n  SelectionButtons.prototype.markSelected = function ($elm) {\n    var radioName;\n\n    if ($elm.attr('type') === 'radio') {\n      radioName = $elm.attr('name');\n      $($elm[0].form).find('input[name=\"' + radioName + '\"]')\n        .parent('label')\n        .removeClass(this.selectedClass);\n      $elm.parent('label').addClass(this.selectedClass);\n    } else { // checkbox\n      if ($elm.is(':checked')) {\n        $elm.parent('label').addClass(this.selectedClass);\n      } else {\n        $elm.parent('label').removeClass(this.selectedClass);\n      }\n    }\n  };\n  SelectionButtons.prototype.addElementLevelEvents = function () {\n    this.clickHandler = this.getClickHandler();\n    this.focusHandler = this.getFocusHandler({ 'level' : 'element' });\n\n    this.$elms\n      .on('click', this.clickHandler)\n      .on('focus blur', this.focusHandler);\n  };\n  SelectionButtons.prototype.addDocumentLevelEvents = function () {\n    this.clickHandler = this.getClickHandler();\n    this.focusHandler = this.getFocusHandler({ 'level' : 'document' });\n\n    $(document)\n      .on('click', this.selector, this.clickHandler)\n      .on('focus blur', this.selector, this.focusHandler);\n  };\n  SelectionButtons.prototype.getClickHandler = function () {\n    return function (e) {\n      this.markSelected($(e.target));\n    }.bind(this);\n  };\n  SelectionButtons.prototype.getFocusHandler = function (opts) {\n    var focusEvent = (opts.level === 'document') ? 'focusin' : 'focus';\n\n    return function (e) {\n      var state = (e.type === focusEvent) ? 'focused' : 'blurred';\n\n      this.markFocused($(e.target), state);\n    }.bind(this);\n  };\n  SelectionButtons.prototype.destroy = function () {\n    if (typeof this.selector !== 'undefined') {\n      $(document)\n        .off('click', this.selector, this.clickHandler)\n        .off('focus blur', this.selector, this.focusHandler);\n    } else {\n      this.$elms\n        .off('click', this.clickHandler)\n        .off('focus blur', this.focusHandler);\n    }\n  };\n\n  root.GOVUK.SelectionButtons = SelectionButtons;\n}).call(this);\n","/**\n * Calculate totals\n *\n * Calculate totals for a selection of terms.\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <span class=\"js-CalculateTotals\" data-total-terms=\".term\" data-total-precision=\"2\"></span>\n */ \n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var CalculateTotals = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  CalculateTotals.prototype = {\n    defaults: {\n      terms: '.term', // Selector for list of terms\n      precision: 2 // Rounding precision (use 0 for integer result)\n    },\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n\n      this.termSelector = $el.data('totalTerms') || this.settings.terms;\n      this.precision = $el.data('totalPrecision') || this.settings.precision;\n\n      this.cacheElements($el);\n\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$total = $el;\n      this.$terms = $(this.termSelector);\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$terms\n        .on('change.CalculateTotals update.CalculateTotals', function() {\n          self.updateTotal();\n        });\n      moj.Events\n        .on('render.CalculateTotals', function() {\n          self.updateTotal();\n        });\n    },\n\n    getNumericValue: function($element) {\n      var value = $element.text();\n      \n      if ($element.is(':input')) {\n        value = $element.val();\n      }\n\n      // Remove commas\n      value = value.replace(/,/g,'');\n\n      return ($.isNumeric(value)) ? parseFloat(value) : 0;\n    },\n\n    getTotal: function() {\n      var self = this,\n          total = 0;\n\n      this.$terms.each(function() {\n        total += self.getNumericValue($(this));\n      });\n\n      return total;\n    },\n\n    updateTotal: function() {\n      var total = this.getTotal();\n\n      total = this.formatNumber(total);\n      this.$total.text(total).trigger('update.CalculateTotals');\n    },\n\n    formatNumber: function(number) {\n      var parts = number.toFixed(this.precision).toString().split(\".\");\n          parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\n      return parts.join(\".\");\n    }\n  };\n\n  moj.Modules._CalculateTotals = CalculateTotals;\n\n  moj.Modules.CalculateTotals = {\n    init: function() {\n      return $('.js-CalculateTotals').each(function() {\n        $(this).data('CalculateTotals', new CalculateTotals($(this), $(this).data()));\n      });\n    }\n  };\n\n}());","/**\n * Conditional form elements reveal\n *\n * Reveal content based on value of related field\n *\n * -----------------------------------------------------------------------\n * Usage:\n * \n * <input type=\"radio\" name=\"trigger_name\" value=\"regex\">\n * <input type=\"radio\" name=\"trigger_name\" value=\"another value\">\n * <div class=\"js-Conditional\" id=\"target_id\" data-conditional-trigger=\"trigger_name\" data-conditional-value=\"^regex$\">...</div>\n */\n\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Conditional = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Conditional.prototype = {\n    defaults: {},\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$conditional = $el;\n      this.$inputs = $('[name=\"' + $el.data('conditionalTrigger') + '\"]');\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs\n        .on('change.Conditional', function() {\n          self.toggle();\n        });\n      moj.Events\n        .on('render.Conditional', function() {\n          self.toggle();\n        });\n    },\n\n    addAriaAttributes: function() {\n      this.$inputs.attr('aria-controls', this.$conditional.attr('id'));\n    },\n\n    getInputValue: function($input) {\n      switch($input.attr('type')) {\n        case \"radio\":\n          return $('[name=\"' + $input.attr('name') + '\"]:checked').attr('value');\n\n        case \"checkbox\":\n          return $input.filter(':checked').val();\n\n        default:\n          return $input.val() || $input.find(':selected').attr('value');\n      }\n    },\n\n    toggle: function() {\n      var currentValue = this.getInputValue(this.$inputs),\n          testExpression = new RegExp(this.$conditional.data('conditionalValue'));\n\n      if (currentValue && currentValue.match(testExpression)) {\n        this.$conditional\n          .show()\n          .attr('aria-expanded', 'true')\n          .attr('aria-hidden', 'false');\n      }\n      else {\n        this.$conditional\n          .hide()\n          .attr('aria-expanded', 'false')\n          .attr('aria-hidden', 'true');\n      }\n    }\n  };\n\n  moj.Modules._Conditional = Conditional;\n\n  moj.Modules.Conditional = {\n    init: function() {\n      return $('.js-Conditional').each(function() {\n        $(this).data('Conditional', new Conditional($(this), $(this).data()));\n      });\n    }\n  };\n\n}());","/**\n * Details Element\n *\n * Replicate <details> functionality that's entirely cross-browser\n * compatible and offers options to update text depending on state\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <div class=\"js-Details [open]\" data-summary-open=\"Alternative text\">\n *   <a class=\"details-trigger\" href=\"#details-content\"><span class=\"summary\">View details</span></a>\n *   <div class=\"details-content\" id=\"details-content\">\n *     Content here\n *   </div>\n * </div>\n *\n * If summaryOpen is set, the summary text is replaced when open. Copy in markup\n * should always be for the closed state.\n */\n(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Details = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Details.prototype = {\n\n    init: function($el, options) {\n      \n      $(\"<i>\").addClass(\"arrow arrow-closed\").text(\"\\u25ba\").prependTo($('.details-trigger', $el));\n\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n\n      this.isOpera = Object.prototype.toString.call(window.opera) == \"[object Opera]\";\n\n      this.openText = this.$details.data(\"summary-open\");\n      this.closedText = this.$summaryText.text();\n\n      this.updateState();\n    },\n\n    cacheElements: function($el) {\n      this.$details = $el;\n      this.$summary = $(\".details-trigger\", $el);\n      this.$summaryText = $(\".summary\", this.$summary);\n      this.$content = $(\".details-content\", $el);\n      this.$icon = $(\"i.arrow\", this.$summary);\n    },\n\n    addAriaAttributes: function() {\n      var id = this.$content.attr(\"id\");\n\n      if (!id) {\n        id = \"js-details-\" + this.$details.index(\".js-Details\");\n        this.$content.attr(\"id\", id);\n      }\n\n      this.$summary.attr({\n        \"role\": \"button\",\n        \"aria-controls\": id,\n        \"aria-expanded\": \"false\"\n      });\n\n      this.$content.attr({\n        \"aria-hidden\": \"true\"\n      });\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$summary.off(\"click.details keydown.details\").on({\n        \"click.details\": function(event) {\n          event.preventDefault();\n          self.toggleContent();\n        },\n        \"keydown.details\": function(event) {\n          if (event.keyCode == 32 || (event.keyCode == 13 && !self.isOpera)) {\n            event.preventDefault();\n            self.$summary.click();\n          }\n        }\n      });\n    },\n\n    updateState: function() {\n      if (this.$details.hasClass(\"open\")) {\n        this.$summary.attr(\"aria-expanded\", \"true\");\n        this.$content.show().attr(\"aria-hidden\", \"false\");\n        this.$icon.removeClass(\"arrow-closed\").addClass(\"arrow-open\").text(\"\\u25bc\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.openText);\n        }\n      }\n      else {\n        this.$summary.attr(\"aria-expanded\", \"false\");\n        this.$content.hide().attr(\"aria-hidden\", \"true\");\n        this.$icon.removeClass(\"arrow-open\").addClass(\"arrow-closed\").text(\"\\u25ba\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.closedText);\n        }\n      }\n    },\n\n    toggleContent: function() {\n      this.$details.toggleClass(\"open\");\n      this.updateState();\n    }\n  };\n\n  moj.Modules._Details = Details;\n\n  moj.Modules.Details = {\n    init: function() {\n      return $(\".js-Details\").each(function() {\n        $(this).data(\"Details\", new Details($(this), $(this).data()));\n      });\n    }\n  };\n\n}());","(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var ExternalLinksTracker = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  ExternalLinksTracker.prototype = {\n    defaults: {\n      \"eventCategory\": \"External links\",\n      \"eventAction\": document.location.pathname\n    },\n\n    init: function($el, options) {\n      if (typeof ga === \"undefined\") return;\n\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$links = $el;\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$links.on('click', function(event) {\n        event.preventDefault();\n        self.sendGAEvent($(this));\n      });\n    },\n\n    sendGAEvent: function($el) {\n      var self = this,\n          href = $el.attr(\"href\"),\n          target = $el.attr(\"target\");\n\n      ga(\"send\",\n         \"event\",\n         self.settings.eventCategory,\n         href,\n         self.settings.eventAction,\n         {\"hitCallback\": self.openLink(href, target)}\n      );\n    },\n\n    openLink: function(href, target) {\n      if (target && !/^_(self|parent|top)$/i.test(target)) {\n        window.open(href, target);\n      }\n      else {\n        window.location.href = href;\n      }\n    }\n  };\n\n  moj.Modules._ExternalLinksTracker = ExternalLinksTracker;\n\n  moj.Modules.ExternalLinksTracker = {\n    init: function() {\n      $('a[rel=external]').each(function() {\n        $(this).data('ExternalLinksTracker', new ExternalLinksTracker($(this), $(this).data()));\n      });\n    }\n  };\n}());","/**\n * Page exit prompt\n *\n * Prompts the user upon leaving the page if they have changed\n * any data in any form.\n */\n\n(function(){\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var PromptOnChange = function(options) {\n    this.init(options);\n    return this;\n  };\n\n  PromptOnChange.prototype = {\n    defaults: {\n      message: \"You have entered some information\"\n    },\n\n    init: function(options) {\n      this.settings = $.extend({}, this.defaults, options);\n      this.enable();\n      this.initMetaRefresh();\n      this.hashedFields = this.hashFields();\n      this.bindEvents();\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      $('form').on('submit', function() {\n        self.disable();\n      });\n\n      $(window).on('beforeunload', function() {\n        return self.runCheck();\n      });\n    },\n\n    hashFields: function() {\n      return $('form').serialize();\n    },\n\n    fieldsHaveChanged: function() {\n      return this.hashFields() !== this.hashedFields;\n    },\n\n    runCheck: function() {\n      var self = this;\n\n      if (this.isEnabled && this.fieldsHaveChanged() && this.isMetaRefresh() === false) {\n        return self.settings.message;\n      }\n    },\n\n    enable: function() {\n      this.isEnabled = true;\n    },\n\n    disable: function() {\n      this.isEnabled = false;\n    },\n\n    isMetaRefresh: function() {      \n      if (typeof this.metaRefreshAt !== 'undefined') {\n        var now = new Date().getTime();\n        \n        if (now >= this.metaRefreshAt) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    initMetaRefresh: function() {\n      var refreshTag = $('head').find('meta[http-equiv=refresh]');\n      \n      if (refreshTag.length) {\n        var refreshTimeoutLength = parseInt(refreshTag.attr('content').match(/^\\d*/)[0]);\n        var now = new Date().getTime();\n        \n        this.metaRefreshAt = now + ((refreshTimeoutLength-1)*1000);\n      }\n    }\n  };\n\n  moj.Modules._PromptOnChange = PromptOnChange;\n  \n  moj.Modules.PromptOnChange = {\n    init: function() {\n      var options = {\n        message: $('[name=promptOnChangeMessage]').val() || \"You have entered some information\"\n      };\n      return new PromptOnChange(options);\n    }\n  };\n\n}());","/**\n * Templated Element\n *\n * Update the text of an element based on the value of a related input field\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <span class=\"js-TemplatedElement\" \n *     data-template-trigger=\"field_name\"\n *     data-template=\"Content with {value}\" \n *     data-template-defaults-for=\"Excluded value\"\n *     data-template-delegate=\"#other-element\">Original content</span>\n *\n * If templateDelegate is set, the functionality will be transferred to the\n * matching element.\n */\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var TemplatedElement = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  TemplatedElement.prototype = {\n    defaults: {\n      trigger: '',\n      template: '{value}',\n      defaultsFor: null\n    },\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n\n      this.trigger = $el.data('templateTrigger') || this.settings.trigger;\n      this.template = $el.data('template') || this.settings.template;\n      this.defaultsFor = $el.data('templateDefaultsFor') || this.settings.defaultsFor;\n      \n      \n      if ($el.data('templateDelegate')) {\n        $el = $($el.data('templateDelegate'));\n      }\n\n      this.originalText = $el.eq(0).text();\n\n      this.cacheElements($el);\n\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$element = $el;\n      this.$inputs = $(':radio[name=\"' + this.trigger + '\"]');\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs.on('change.TemplatedElement', function() {\n        self.updateText();\n      });\n      moj.Events.on('render.TemplatedElement', function() {\n        self.updateText();\n      });\n    },\n\n    getCurrentValue: function() {\n      var $currentSelection = this.$inputs.filter(':checked');\n      var currentValue = $currentSelection.attr('data-template-value') || $currentSelection.parent('label').text();\n\n      return currentValue.trim();\n    },\n\n    formatValue: function(value) {\n      return value.toLowerCase();\n    },\n\n    updateText: function() {\n      this.$element.text(this.getText());\n    },\n\n    getText: function() {\n      var text = this.originalText,\n          value = this.getCurrentValue();\n\n      if (value && value !== this.defaultsFor) {\n        value = this.formatValue(value);\n        text = this.populateTemplate(value);\n      }\n\n      return text;\n    },\n\n    populateTemplate: function(value) {\n      return this.template.replace('{value}', value);\n    }\n  };\n\n  moj.Modules._TemplatedElement = TemplatedElement;\n\n  moj.Modules.TemplatedElement = {\n    init: function() {\n      return $('.js-TemplatedElement').each(function() {\n        $(this).data('TemplatedElement', new TemplatedElement($(this), $(this).data()));\n      });\n    }\n  };\n\n}());","$(document).ready(function () {\n    jQuery.fx.off = true;\n\n    var selectionButtons = new GOVUK.SelectionButtons($(\"label input[type='radio'], label input[type='checkbox']\"));\n\n    $('[name^=nojs]').remove();\n});"],"sourceRoot":"/source/"}