{"version":3,"sources":["bind.js","trim.js","moj.Conditional.js","moj.Details.js","moj.ExternalLinksTracker.js","moj.PromptOnChange.js","moj.SelectionButtons.js","moj.TemplatedElement.js","moj.focusEvents.js","application.js"],"names":["Function","prototype","bind","oThis","this","TypeError","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat","String","trim","rtrim","replace","window","moj","Modules","Events","$","Conditional","$el","options","init","defaults","settings","extend","cacheElements","addAriaAttributes","bindEvents","$conditional","$inputs","data","self","on","toggle","attr","getInputValue","$input","filter","val","find","currentValue","testExpression","RegExp","match","show","hide","_Conditional","each","Details","addClass","text","prependTo","isOpera","Object","toString","opera","openText","$details","closedText","$summaryText","updateState","$summary","$content","$icon","id","index","role","aria-controls","aria-expanded","aria-hidden","off","click.details","event","preventDefault","toggleContent","keydown.details","keyCode","click","hasClass","removeClass","toggleClass","_Details","ExternalLinksTracker","eventCategory","eventAction","document","location","pathname","ga","$links","sendGAEvent","href","target","hitCallback","openLink","test","open","_ExternalLinksTracker","PromptOnChange","message","enable","initMetaRefresh","hashedFields","hashFields","disable","runCheck","serialize","fieldsHaveChanged","isEnabled","isMetaRefresh","metaRefreshAt","now","Date","getTime","refreshTag","length","refreshTimeoutLength","parseInt","_PromptOnChange","SelectionButtons","change","is","closest","focus","blur","trigger","TemplatedElement","template","defaultsFor","originalText","eq","$element","updateText","getCurrentValue","$currentSelection","parent","formatValue","value","toLowerCase","getText","populateTemplate","_TemplatedElement","removeAttr","jQuery","fx","remove"],"mappings":"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","file":"application.js","sourcesContent":["/**\n * Polyfill for browsers not supporting native bind()\n *\n * https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind\n */\n if (!Function.prototype.bind) {\n   Function.prototype.bind = function(oThis) {\n     if (typeof this !== 'function') {\n       // closest thing possible to the ECMAScript 5\n       // internal IsCallable function\n       throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n     }\n\n     var aArgs   = Array.prototype.slice.call(arguments, 1),\n         fToBind = this,\n         fNOP    = function() {},\n         fBound  = function() {\n           return fToBind.apply(this instanceof fNOP\n                  ? this\n                  : oThis,\n                  aArgs.concat(Array.prototype.slice.call(arguments)));\n         };\n\n     fNOP.prototype = this.prototype;\n     fBound.prototype = new fNOP();\n\n     return fBound;\n   };\n }\n","/**\n * Polyfill for browsers not supporting native trim()\n *\n * https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trim\n */\n if (!String.prototype.trim) {\n   (function() {\n     // Make sure we trim BOM and NBSP\n     var rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n     String.prototype.trim = function() {\n       return this.replace(rtrim, '');\n     };\n   })();\n }\n","/**\n * Conditional form elements reveal\n *\n * Reveal content based on value of related field\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <input type=\"radio\" name=\"trigger_name\" value=\"regex\">\n * <input type=\"radio\" name=\"trigger_name\" value=\"another value\">\n * <div class=\"js-Conditional\" id=\"target_id\" data-conditional-trigger=\"trigger_name\" data-conditional-value=\"^regex$\">...</div>\n */\n\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Conditional = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Conditional.prototype = {\n    defaults: {},\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$conditional = $el;\n      this.$inputs = $('[name=\"' + $el.data('conditionalTrigger') + '\"]');\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs\n        .on('change.Conditional', function() {\n          self.toggle();\n        });\n      moj.Events\n        .on('render.Conditional', function() {\n          self.toggle();\n        });\n    },\n\n    addAriaAttributes: function() {\n      this.$inputs.attr('aria-controls', this.$conditional.attr('id'));\n    },\n\n    getInputValue: function($input) {\n      switch($input.attr('type')) {\n        case \"radio\":\n          return $('[name=\"' + $input.attr('name') + '\"]:checked').attr('value');\n\n        case \"checkbox\":\n          return $input.filter(':checked').val();\n\n        default:\n          return $input.val() || $input.find(':selected').attr('value');\n      }\n    },\n\n    toggle: function() {\n      var currentValue = this.getInputValue(this.$inputs),\n          testExpression = new RegExp(this.$conditional.data('conditionalValue'));\n\n      if (currentValue && currentValue.match(testExpression)) {\n        this.$conditional\n          .show()\n          .attr('aria-expanded', 'true')\n          .attr('aria-hidden', 'false');\n      }\n      else {\n        this.$conditional\n          .hide()\n          .attr('aria-expanded', 'false')\n          .attr('aria-hidden', 'true');\n      }\n    }\n  };\n\n  moj.Modules._Conditional = Conditional;\n\n  moj.Modules.Conditional = {\n    init: function() {\n      return $('.js-Conditional').each(function() {\n        $(this).data('Conditional', new Conditional($(this), $(this).data()));\n      });\n    }\n  };\n\n}());\n","/**\n * Details Element\n *\n * Replicate <details> functionality that's entirely cross-browser\n * compatible and offers options to update text depending on state\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <div class=\"js-Details [open]\" data-summary-open=\"Alternative text\">\n *   <a class=\"details-trigger\" href=\"#details-content\"><span class=\"summary\">View details</span></a>\n *   <div class=\"details-content\" id=\"details-content\">\n *     Content here\n *   </div>\n * </div>\n *\n * If summaryOpen is set, the summary text is replaced when open. Copy in markup\n * should always be for the closed state.\n */\n(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var Details = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  Details.prototype = {\n\n    init: function($el, options) {\n\n      $(\"<i>\").addClass(\"arrow arrow-closed\").text(\"\\u25ba\").prependTo($('.details-trigger', $el));\n\n      this.cacheElements($el);\n      this.addAriaAttributes();\n      this.bindEvents();\n\n      this.isOpera = Object.prototype.toString.call(window.opera) == \"[object Opera]\";\n\n      this.openText = this.$details.data(\"summary-open\");\n      this.closedText = this.$summaryText.text();\n\n      this.updateState();\n    },\n\n    cacheElements: function($el) {\n      this.$details = $el;\n      this.$summary = $(\".details-trigger\", $el);\n      this.$summaryText = $(\".summary\", this.$summary);\n      this.$content = $(\".details-content\", $el);\n      this.$icon = $(\"i.arrow\", this.$summary);\n    },\n\n    addAriaAttributes: function() {\n      var id = this.$content.attr(\"id\");\n\n      if (!id) {\n        id = \"js-details-\" + this.$details.index(\".js-Details\");\n        this.$content.attr(\"id\", id);\n      }\n\n      this.$summary.attr({\n        \"role\": \"button\",\n        \"aria-controls\": id,\n        \"aria-expanded\": \"false\"\n      });\n\n      this.$content.attr({\n        \"aria-hidden\": \"true\"\n      });\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$summary.off(\"click.details keydown.details\").on({\n        \"click.details\": function(event) {\n          event.preventDefault();\n          self.toggleContent();\n        },\n        \"keydown.details\": function(event) {\n          if (event.keyCode == 32 || (event.keyCode == 13 && !self.isOpera)) {\n            event.preventDefault();\n            self.$summary.click();\n          }\n        }\n      });\n    },\n\n    updateState: function() {\n      if (this.$details.hasClass(\"open\")) {\n        this.$summary.attr(\"aria-expanded\", \"true\");\n        this.$content.show().attr(\"aria-hidden\", \"false\");\n        this.$icon.removeClass(\"arrow-closed\").addClass(\"arrow-open\").text(\"\\u25bc\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.openText);\n        }\n      }\n      else {\n        this.$summary.attr(\"aria-expanded\", \"false\");\n        this.$content.hide().attr(\"aria-hidden\", \"true\");\n        this.$icon.removeClass(\"arrow-open\").addClass(\"arrow-closed\").text(\"\\u25ba\");\n\n        if (this.openText) {\n          this.$summaryText.text(this.closedText);\n        }\n      }\n    },\n\n    toggleContent: function() {\n      this.$details.toggleClass(\"open\");\n      this.updateState();\n    }\n  };\n\n  moj.Modules._Details = Details;\n\n  moj.Modules.Details = {\n    init: function() {\n      return $(\".js-Details\").each(function() {\n        $(this).data(\"Details\", new Details($(this), $(this).data()));\n      });\n    }\n  };\n\n}());\n","(function() {\n  \"use strict\";\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var ExternalLinksTracker = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  ExternalLinksTracker.prototype = {\n    defaults: {\n      \"eventCategory\": \"External links\",\n      \"eventAction\": document.location.pathname\n    },\n\n    init: function($el, options) {\n      if (typeof ga === \"undefined\") return;\n\n      this.settings = $.extend({}, this.defaults, options);\n      this.cacheElements($el);\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$links = $el;\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      this.$links.on('click', function(event) {\n        event.preventDefault();\n        self.sendGAEvent($(this));\n      });\n    },\n\n    sendGAEvent: function($el) {\n      var self = this,\n          href = $el.attr(\"href\"),\n          target = $el.attr(\"target\");\n\n      ga(\"send\",\n         \"event\",\n         self.settings.eventCategory,\n         href,\n         self.settings.eventAction,\n         {\"hitCallback\": self.openLink(href, target)}\n      );\n    },\n\n    openLink: function(href, target) {\n      if (target && !/^_(self|parent|top)$/i.test(target)) {\n        window.open(href, target);\n      }\n      else {\n        window.location.href = href;\n      }\n    }\n  };\n\n  moj.Modules._ExternalLinksTracker = ExternalLinksTracker;\n\n  moj.Modules.ExternalLinksTracker = {\n    init: function() {\n      $('a[rel=external]').each(function() {\n        $(this).data('ExternalLinksTracker', new ExternalLinksTracker($(this), $(this).data()));\n      });\n    }\n  };\n}());\n","/**\n * Page exit prompt\n *\n * Prompts the user upon leaving the page if they have changed\n * any data in any form.\n */\n\n(function(){\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var PromptOnChange = function(options) {\n    this.init(options);\n    return this;\n  };\n\n  PromptOnChange.prototype = {\n    defaults: {\n      message: \"You have entered some information\"\n    },\n\n    init: function(options) {\n      this.settings = $.extend({}, this.defaults, options);\n      this.enable();\n      this.initMetaRefresh();\n      this.hashedFields = this.hashFields();\n      this.bindEvents();\n    },\n\n    bindEvents: function() {\n      var self = this;\n\n      $('form').on('submit', function() {\n        self.disable();\n      });\n\n      $(window).on('beforeunload', function() {\n        return self.runCheck();\n      });\n    },\n\n    hashFields: function() {\n      return $('form').serialize();\n    },\n\n    fieldsHaveChanged: function() {\n      return this.hashFields() !== this.hashedFields;\n    },\n\n    runCheck: function() {\n      var self = this;\n\n      if (this.isEnabled && this.fieldsHaveChanged() && this.isMetaRefresh() === false) {\n        return self.settings.message;\n      }\n    },\n\n    enable: function() {\n      this.isEnabled = true;\n    },\n\n    disable: function() {\n      this.isEnabled = false;\n    },\n\n    isMetaRefresh: function() {\n      if (typeof this.metaRefreshAt !== 'undefined') {\n        var now = new Date().getTime();\n\n        if (now >= this.metaRefreshAt) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    initMetaRefresh: function() {\n      var refreshTag = $('head').find('meta[http-equiv=refresh]');\n\n      if (refreshTag.length) {\n        var refreshTimeoutLength = parseInt(refreshTag.attr('content').match(/^\\d*/)[0]);\n        var now = new Date().getTime();\n\n        this.metaRefreshAt = now + ((refreshTimeoutLength-1)*1000);\n      }\n    }\n  };\n\n  moj.Modules._PromptOnChange = PromptOnChange;\n\n  moj.Modules.PromptOnChange = {\n    init: function() {\n      var options = {\n        message: $('[name=promptOnChangeMessage]').val() || \"You have entered some information\"\n      };\n      return new PromptOnChange(options);\n    }\n  };\n\n}());\n","/**\n * Selection Buttons\n *\n * Provides extra focused and selected classes to radio and checkbox\n * form inputs to bring them to default gov.uk styling\n */\n\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  moj.Modules.SelectionButtons = {\n    init: function() {\n\n      $('label input[type=radio], label input[type=checkbox]').on({\n        'change': function(){\n          if ($(this).is(':checked')) {\n            if ($(this).is(':radio')) {\n              $(this).closest('form').find('[name=\"' + $(this).attr('name') + '\"]').closest('label').removeClass('selected');\n            }\n            $(this).closest('label').addClass('selected');\n          }\n          else {\n            $(this).closest('label').removeClass('selected');\n          }\n        },\n        'focus': function() {\n          $(this).closest('label').addClass('focused');\n        },\n        'blur': function() {\n          $(this).closest('label').removeClass('focused');\n        }\n      }).trigger('change');\n\n    }\n  };\n\n}());\n","/**\n * Templated Element\n *\n * Update the text of an element based on the value of a related input field\n *\n * -----------------------------------------------------------------------\n * Usage:\n *\n * <span class=\"js-TemplatedElement\"\n *     data-template-trigger=\"field_name\"\n *     data-template=\"Content with {value}\"\n *     data-template-defaults-for=\"Excluded value\"\n *     data-template-delegate=\"#other-element\">Original content</span>\n *\n * If templateDelegate is set, the functionality will be transferred to the\n * matching element.\n */\n(function() {\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  var TemplatedElement = function($el, options) {\n    this.init($el, options);\n    return this;\n  };\n\n  TemplatedElement.prototype = {\n    defaults: {\n      trigger: '',\n      template: '{value}',\n      defaultsFor: null\n    },\n\n    init: function($el, options) {\n      this.settings = $.extend({}, this.defaults, options);\n\n      this.trigger = $el.data('templateTrigger') || this.settings.trigger;\n      this.template = $el.data('template') || this.settings.template;\n      this.defaultsFor = $el.data('templateDefaultsFor') || this.settings.defaultsFor;\n\n      if ($el.data('templateDelegate')) {\n        $el = $($el.data('templateDelegate'));\n      }\n\n      this.originalText = $el.eq(0).text();\n\n      this.cacheElements($el);\n\n      this.bindEvents();\n    },\n\n    cacheElements: function($el) {\n      this.$element = $el;\n      this.$inputs = $(':radio[name=\"' + this.trigger + '\"]');\n    },\n\n    bindEvents: function() {\n      var self = this;\n      this.$inputs.on('change.TemplatedElement', function() {\n        self.updateText();\n      });\n      moj.Events.on('render.TemplatedElement', function() {\n        self.updateText();\n      });\n    },\n\n    getCurrentValue: function() {\n      var $currentSelection = this.$inputs.filter(':checked');\n      var currentValue = $currentSelection.attr('data-template-value') || $currentSelection.parent('label').text();\n\n      return currentValue.trim();\n    },\n\n    formatValue: function(value) {\n      return value.toLowerCase();\n    },\n\n    updateText: function() {\n      this.$element.text(this.getText());\n    },\n\n    getText: function() {\n      var text = this.originalText,\n          value = this.getCurrentValue();\n\n      if (value && value !== this.defaultsFor) {\n        value = this.formatValue(value);\n        text = this.populateTemplate(value);\n      }\n\n      return text;\n    },\n\n    populateTemplate: function(value) {\n      return this.template.replace('{value}', value);\n    }\n  };\n\n  moj.Modules._TemplatedElement = TemplatedElement;\n\n  moj.Modules.TemplatedElement = {\n    init: function() {\n      return $('.js-TemplatedElement').each(function() {\n        $(this).data('TemplatedElement', new TemplatedElement($(this), $(this).data()));\n      });\n    }\n  };\n\n}());\n","\n(function(){\n  'use strict';\n\n  window.moj = window.moj || { Modules: {}, Events: $({}) };\n\n  /**\n   * Move focus to main content when using the Skip link\n   */\n  $('.skiplink').on('click', function() {\n    $('#content').attr('tabindex', -1).on('blur focusout', function() {\n      $(this).removeAttr('tabindex');\n    }).focus();\n  });\n\n  /**\n   * Move focus to error summary or success header when present\n   */\n\n\n  /**\n   * Move focus to associated field when clicking an error summary error message\n   */\n\n})();\n","$(function() {\n  jQuery.fx.off = true;\n\n  $('.nojs-only[name=split_form]').remove();\n\n  $(document).on('click', '.skiplink', function() {\n    $('#content').attr('tabindex', -1).on('blur focusout', function() {\n      $(this).removeAttr('tabindex');\n    }).focus();\n  });\n\n  // Handle spacebar use on links with role=button\n  $(document).on('keypress', 'a[role=button]', function(event){\n    if (event.keyCode === 32) {\n      event.preventDefault();\n      event.target.click();\n    }\n  });\n});\n"],"sourceRoot":"/source/"}