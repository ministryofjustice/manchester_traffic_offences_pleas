{% extends "plea/base.html" %}
{% block page_title %}{{ block.super }} Your expenses{% endblock %}
{% load staticfiles testing %}
{% block page_content %}

    <div class="full-width group">
        <div class="main" id="your-expenses">

            <form method=POST class="pleaform form" autocomplete="off">
                {% csrf_token %}
                {% with forms.0 as form %}
                    {% if form.errors %}
                        <section class="flash error-summary">
                            <h2 id="error-heading">You need to fix the errors on this page before continuing.</h2>
                            <p>See highlighted errors below.</p>
                            <ul>
                                {% for field in form %}
                                    {% if field.errors %}
                                        <li><a class="error-link"
                                               href="#section_{{ field.name }}">{{ field.errors|striptags }}</a></li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        </section>
                    {% endif %}


                    <h2>Your expenses</h2>

                    <p>To help the court decide your fine, you must provide information about your expenses.</p>

                    <hr>

                    {% with form.hardship_details as field %}
                        {% include "widgets/std_field.html" %}
                    {% endwith %}

                    <h3>Household expenses</h3>

                    <p>What are your monthly household bills for the following?</p>

                    <div class="expense-container" id="household_expenses">
                        {% with form.household_accommodation as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.household_utility_bills as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.household_insurance as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.household_council_tax as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}
                    </div>

                    <hr>

                    <h3>Other expenses</h3>

                    <p>What are your monthly bills for the following?</p>

                    {% with form.other_bill_payers as field %}
                        {% include "widgets/std_field.html" %}
                    {% endwith %}

                    <div class="expense-container" id="other_expenses">
                        {% with form.other_tv_subscription as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.other_travel_expenses as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.other_telephone as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.other_loan_repayments as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.other_court_payments as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                        {% with form.other_child_maintenance as field %}
                            {% include "widgets/money_field.html" %}
                        {% endwith %}

                    </div>

                {% endwith %}

                <hr class="js-enabled">

                <table id="expense-summary" class="js-enabled">
                    <tr>
                        <td>Total household expenses</td>
                        <td>£<span class="total_household"></span></td>
                    </tr>
                    <tr>
                        <td>Total other expenses</td>
                        <td>£<span class="total_other"></span></td>
                    </tr>
                    <tr class="total">
                        <td><strong>Total expenses</strong></td>
                        <td><strong>£<span class="total_expenses"></span></strong></td>
                    </tr>
                </table>

                <div class="actions">
                    <button class="button" type=submit>Continue</button>
                </div>

            </form>
        </div>
    </div>
{% endblock page_content %}
